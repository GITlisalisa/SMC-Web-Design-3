(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{129:function(e,t,s){"use strict";s.r(t);var o=s(0),i=s.n(o),a=s(2),n=s.n(a),r=s(7),p=s(58),u=s.n(p),l=s(41),c=s.n(l),d=s(1),h=s(120),f=s.n(h),m=s(74),v=s(100),w=s(21),g=s.n(w),y=s(218),b=s(36),k=s(11),S=function(e,t,s){return t&&O(e.prototype,t),s&&O(e,s),e};function O(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var P=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(E,i.a.Component),S(E,[{key:"componentWillReceiveProps",value:function(e){if(!u()(this.props.wishlist,e.wishlist)){var t=this.checkForSavedProducts(e);this.state.isSavedProduct!==t&&this.updateProductDetails(e)}}},{key:"componentDidMount",value:function(){["android","iPhone"].forEach(function(o){if(document.getElementsByTagName("body")[0].classList.contains(o)){var i=document.getElementsByTagName("svg");Array.from(i).forEach(function(e,t){var s=i[t].getElementsByTagName("g")[0];return s&&"url(#__lottie_element_2)"===s.getAttribute("clip-path")&&s.setAttribute("clip-path","url(#__lottie_element_"+o.toLowerCase()+")"),e})}})}},{key:"render",value:function(){var e=this.state.isSavedProduct?d.get(window.tiffany,"labels.wishlistRemoveLabel","Click to remove from wishlist"):d.get(window.tiffany,"labels.wishlistAddLabel","Click to add to wishlist"),t={loop:!1,autoplay:!1,animationData:this.state.isSavedProduct?m["wishlist-item"]:m["wishlist-empty"],rendererSettings:{preserveAspectRatio:v.a.SLICE_ASPECT,id:this.state.isSavedProduct?"wishlist-item":"wishlist-empty"}},s=[{eventName:v.a.ANIMATION_COMPLETE,callback:this.completeAnimationHandler}];return d.get(this.props.aem,"isEstore")?null:i.a.createElement("button",{type:"button","aria-label":e,onClick:this.handleFavoriteClick,onFocus:this.mouseEnterHandler,onBlur:this.mouseLeaveHandler,onMouseEnter:this.mouseEnterHandler,onMouseLeave:this.mouseLeaveHandler,className:"wishlist",tabIndex:this.props.tabIndexVal||void 0},i.a.createElement(f.a,{ariaLabel:e,isStopped:this.state.isStopped,options:t,segments:this.state.segments,eventListeners:s}))}}]),E);function E(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,e));_.call(t);var s=t.checkForSavedProducts(t.props);return t.state={isSavedProduct:s,segments:null,isStopped:!0},t.wishListButtonRef=i.a.createRef(),t}var _=function(){var o=this;this.checkForSavedProducts=function(e){var t=e.groupsku&&0<=e.wishlist.groupTypeList.indexOf(e.groupsku.toString()),s=0<=e.wishlist.skuId.indexOf(e.sku.toString()),o=0<=e.wishlist.skuId.indexOf(e.groupsku.toString());return e.sku&&!t?s:o},this.updateProductDetails=function(e){o.setState({isSavedProduct:o.checkForSavedProducts(e)},function(){o.setState({isStopped:!1})})},this.handleFavoriteClick=function(e){e&&e.preventDefault(),o.props.isInByo&&e&&e.stopPropagation();var t=c()(d.get(o.props.aem,"wishlistConfig.delete",{})),s=c()(d.get(o.props.aem,"wishlistConfig.add",{}));if(t.containerName=o.props.containerName,s.containerName=o.props.containerName,o.state.isSavedProduct)return d.set(t,"payload.listItemIDs",o.props.wishlist.listId[o.props.sku]||o.props.wishlist.listId[o.props.groupsku]),o.props.dispatch(Object(y.c)(t,s)),void Object(k.removeSavedItemsAnalytics)({sku:o.props.sku||o.props.groupsku});s.payload&&(delete s.payload.sku,delete s.payload.groupsku),o.props.groupsku&&d.set(s,"payload.groupSku",o.props.groupsku),!o.props.sku||o.props.isGroupTwo&&"false"!==o.props.isGroupTwo||d.set(s,"payload.sku",o.props.sku),o.props.dispatch(Object(y.a)(s)),o.props.dispatch(Object(b.g)(o.props.openWishListFlyout))},this.mouseEnterHandler=function(){window.matchMedia(g.a.BREAKPOINTS.DESKTOP_AND_BELOW).matches||o.setState({isMouseOver:!0,segments:[1],isStopped:!1})},this.mouseLeaveHandler=function(){o.setState({isMouseOver:!1,segments:[1],isStopped:!0})},this.completeAnimationHandler=function(){var e=window.matchMedia(g.a.BREAKPOINTS.DESKTOP_AND_BELOW).matches;o.state.isMouseOver&&!e||o.setState({segments:[1],isStopped:!0})}};P.defaultProps={groupsku:"",isGroupTwo:!1,isInByo:!1,openWishListFlyout:!0,containerName:""},P.propTypes={aem:n.a.any.isRequired,dispatch:n.a.func.isRequired,wishlist:n.a.object.isRequired,sku:n.a.string.isRequired,groupsku:n.a.string,isGroupTwo:n.a.bool,isInByo:n.a.bool,openWishListFlyout:n.a.bool,containerName:n.a.string},t.default=Object(r.connect)(function(e){return{aem:e.aem,wishlist:e.wishlist,labels:e.authoredLabels}},null,null,{forwardRef:!0})(P)}}]);