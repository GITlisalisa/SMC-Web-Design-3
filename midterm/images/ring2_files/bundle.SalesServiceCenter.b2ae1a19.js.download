(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{116:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a(1),s=a(8),n=function(){var e=r.get(window,"tiffany.authoredContent.salesServiceCookieName","");return s.b(e)}},1161:function(e,t,a){"use strict";a.r(t);var r=a(0),m=a.n(r),s=a(2),n=a.n(s),o=a(7),i=a(5),l=a.n(i),c=a(10),v=a.n(c),u=a(38),d=a(1),f=a(6),p=a(116),b=a(86),h=a(156),_=a(411),g=function(e,t,a){return t&&y(e.prototype,t),a&&y(e,a),e};function y(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(E,m.a.Component),g(E,[{key:"render",value:function(){var a=this,e=this.props.columnHeadings,r=e.dcNubmer,s=e.dcStoreName,n=e.transitTime,o=e.onHand,i=e.reserved,l=e.available,t=this.props.distributionInventory,c={};return t&&0<t.length&&(c=this.props.distributionInventory.reduce(function(e,t){return{available:e.available+t.available}})),m.a.createElement(m.a.Fragment,null,this.props.noDistributionInventoryResults&&m.a.createElement("p",{role:"alert",className:"container-centered"},this.props.distributionNoResultsLabel),m.a.createElement(v.a,{query:f.a.desktopAndAbove},m.a.createElement("div",{className:"container-centered"},0<this.props.distributionInventory.length&&m.a.createElement(_.a,{data:this.props.distributionInventory,showPagination:!1,minRows:0,resizable:!1,columns:[{Header:r,accessor:"distributionStoreNumber",sortable:!1,Footer:this.props.availableFooterText,minWidth:165},{Header:s,accessor:"distributionStoreNumber",Cell:function(e){return m.a.createElement("span",null,a.props.storeNameMap[e.value])},sortable:!1,minWidth:660},{Header:n,accessor:"totalInTransit",sortable:!1,minWidth:165},{Header:o,accessor:"onHand",sortable:!1,minWidth:165},{Header:i,accessor:"reserved",sortable:!1,minWidth:165},{Header:l,accessor:"available",sortable:!1,minWidth:165,Footer:m.a.createElement("span",null,c?c.available:0)}]}))),m.a.createElement(v.a,{query:f.a.desktopAndBelow},m.a.createElement("div",{className:"distribution_inv"},0<this.props.distributionInventory.length&&this.props.distributionInventory.map(function(e,t){return m.a.createElement("div",{key:t.toString(),className:"sales-service__wrap"},m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},r),m.a.createElement("div",{className:"sales-service__row_value"},e.distributionStoreNumber)),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},s),m.a.createElement("div",{className:"sales-service__row_value"},a.props.storeNameMap[e.distributionStoreNumber])),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},n),m.a.createElement("div",{className:"sales-service__row_value"},e.totalInTransit)),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},o),m.a.createElement("div",{className:"sales-service__row_value"},e.onHand)),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},i),m.a.createElement("div",{className:"sales-service__row_value"},e.reserved)),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},l),m.a.createElement("div",{className:"sales-service__row_value"},e.available)))}),0<this.props.distributionInventory.length&&m.a.createElement("div",{className:"sales-service__row table-footer"},m.a.createElement("div",{className:"sales-service__row_heading"},this.props.availableFooterText),m.a.createElement("div",{className:"sales-service__row_value"},c?c.available:0)))))}}]),E);function E(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}w.defaultProps={},w.propTypes={distributionInventory:n.a.array.isRequired,storeNameMap:n.a.object.isRequired,columnHeadings:n.a.object.isRequired,availableFooterText:n.a.string.isRequired,noDistributionInventoryResults:n.a.bool.isRequired,distributionNoResultsLabel:n.a.string.isRequired};var N=Object(o.connect)(function(e){return{distributionInventory:e.salesService.distributionInventory,storeNameMap:d.get(e,"aem.salesServiceCenter.storeNameMap"),columnHeadings:e.salesService.columnHeadings,availableFooterText:d.get(e,"aem.salesServiceCenter.availableFooterLabel"),noDistributionInventoryResults:d.get(e,"salesService.noOnOrderStatusResults",!1),distributionNoResultsLabel:d.get(e,"aem.salesServiceCenter.distributionNoResultsLabel","")}})(w);function S(e){var t=new Date(e),a=d.get(window,"authoredContent.salesServiceCenter.months",["January","February","March","April","May","June","July","August","September","October","November","December"]),r=t.getDate(),s=t.getMonth(),n=t.getFullYear();return a[s]+" "+r+", "+n}a(794);var O=function(e,t,a){return t&&R(e.prototype,t),a&&R(e,a),e};function R(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(L,m.a.Component),O(L,[{key:"render",value:function(){var e=this.props.columnHeadings,t=e.storeNumber,a=e.dcName,r=e.poOrder,s=e.onOrder,n=e.reserved,o=e.available,i=e.expectedDate,l=e.countryOfOrigin;return m.a.createElement(m.a.Fragment,null,m.a.createElement(v.a,{query:f.a.desktopAndAbove},m.a.createElement("div",{className:"container-centered"},0<this.props.onOrderStatus.length&&m.a.createElement(_.a,{data:this.props.onOrderStatus,showPagination:!1,minRows:0,resizable:!1,columns:[{Header:t,accessor:"poLocation",sortable:!1,minWidth:153},{Header:a,accessor:"poName",sortable:!1,minWidth:265},{Header:r,accessor:"data",Cell:function(e){return e.value.map(function(e){return m.a.createElement("div",{key:e.poNumber},e.poNumber)})},sortable:!1,minWidth:153},{Header:s,accessor:"data",Cell:function(e){return e.value.map(function(e){return m.a.createElement("div",{key:e.poNumber},e.onOrder)})},sortable:!1,minWidth:153},{Header:n,accessor:"data",Cell:function(e){return e.value.map(function(e){return m.a.createElement("div",{key:e.poNumber},e.reserved)})},sortable:!1,minWidth:153},{Header:o,accessor:"data",Cell:function(e){return e.value.map(function(e){return m.a.createElement("div",{key:e.poNumber},e.available)})},sortable:!1,minWidth:153},{Header:i,accessor:"data",Cell:function(e){return e.value.map(function(e){return m.a.createElement("div",{key:e.poNumber},S(e.expectedDate))})},sortable:!1,minWidth:153},{Header:l,accessor:"data",Cell:function(e){return m.a.createElement("div",null,e.value&&0<e.value.length?e.value[0].countryOfOriginName:"")},sortable:!1,minWidth:153}]}),this.props.noOnOrderStatusResults&&m.a.createElement("p",{role:"alert"},this.props.onOrderNoResultsLabel))),m.a.createElement(v.a,{query:f.a.desktopAndBelow},m.a.createElement("div",{className:"on_order"},0<this.props.onOrderStatus.length&&this.props.onOrderStatus.map(function(e){return m.a.createElement("div",{key:e.poName,className:"sales-service__wrap"},m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},t),m.a.createElement("div",{className:"sales-service__row_value"},e.poLocation)),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},a),m.a.createElement("div",{className:"sales-service__row_value"},e.poName)),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},r),m.a.createElement("div",{className:"sales-service__row_value"},e.data.map(function(e){return m.a.createElement("p",{key:e.poNumber,className:"sales-service__row_col"},e.poNumber)}))),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},s),m.a.createElement("div",{className:"sales-service__row_value"},e.data.map(function(e){return m.a.createElement("p",{key:e.poNumber,className:"sales-service__row_col"},e.onOrder)}))),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},n),m.a.createElement("div",{className:"sales-service__row_value"},e.data.map(function(e){return m.a.createElement("p",{key:e.poNumber,className:"sales-service__row_col"},e.reserved)}))),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},o),m.a.createElement("div",{className:"sales-service__row_value"},e.data.map(function(e){return m.a.createElement("p",{key:e.poNumber,className:"sales-service__row_col"},e.available)}))),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},i),m.a.createElement("div",{className:"sales-service__row_value"},e.data.map(function(e){return m.a.createElement("p",{key:e.poNumber,className:"sales-service__row_col"},S(e.expectedDate))}))),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},l),m.a.createElement("div",{className:"sales-service__row_value"},e.data.length?e.data[0].countryOfOriginName:"")))}),0===this.props.onOrderStatus.length&&m.a.createElement("p",{className:"on_order__no-results",role:"alert"},this.props.onOrderNoResultsLabel))))}}]),L);function L(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,L),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(L.__proto__||Object.getPrototypeOf(L)).apply(this,arguments))}C.defaultProps={},C.propTypes={onOrderStatus:n.a.array.isRequired,columnHeadings:n.a.object.isRequired,noOnOrderStatusResults:n.a.bool.isRequired,onOrderNoResultsLabel:n.a.string.isRequired};var T=Object(o.connect)(function(e){return{onOrderStatus:e.salesService.onOrderStatus,columnHeadings:e.salesService.columnHeadings,noOnOrderStatusResults:d.get(e,"salesService.noOnOrderStatusResults",!1),onOrderNoResultsLabel:d.get(e,"aem.salesServiceCenter.onOrderNoResultsLabel","")}})(C),A=a(404),j=a(235),I=a(260),k=a(3),q=a(29),D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},H=function(e,t,a){return t&&x(e.prototype,t),a&&x(e,a),e};function x(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(M,m.a.Component),H(M,[{key:"componentDidMount",value:function(){var a=this;navigator.geolocation.getCurrentPosition(function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};Object(I.getZipCodeOrCityFromPosition)(t,!0).then(function(e){0<Object.keys(e).length&&(a.retailSearchRef.value=e,Object(k.addClass)(a.retailSearchRef.nextSibling,"active"),a.setState({value:e}))})})}},{key:"render",value:function(){var a=this,r=this.props.regionsMap;return m.a.createElement("React-Fragment",null,m.a.createElement("form",{className:"retail"},m.a.createElement("div",{className:"retail-search"},m.a.createElement("div",{className:"retail-search__type"},this.props.searchTypes.map(function(e,t){return m.a.createElement("div",{key:t.toString(),role:"radio",tabIndex:"-1","aria-checked":a.state.type===e.type,className:"retail-search__type_group custom-radio-wrapper",onClick:function(){return a.onSelectionChanged(e.type,e.placeHolder)},onKeyDown:function(){return a.onSelectionChanged(e.type,e.placeHolder)}},m.a.createElement("div",{className:l()("custom-radio-wrapper__radio display__inline-block vertical-align__middle ",{checked:a.state.type===e.type})},m.a.createElement("span",{className:"blue-dot display__block"})),e.displayValue)})),m.a.createElement("div",{className:"retail-search__text material-input"},m.a.createElement("input",{className:"retail-search_input input",name:"address",id:"address",type:"text",ref:function(e){a.retailSearchRef=e},onChange:this.updateAddressStore,onKeyPress:this.searchInputHandler}),m.a.createElement("label",{className:"storesearchbar__of_region_label label",htmlFor:"address"},this.state.placeHolder)),m.a.createElement("div",{className:"retail-search__region"},m.a.createElement("span",{className:"retail-search__region_text"},this.props.withinLabel),m.a.createElement(v.a,{query:f.a.desktopAndAbove},m.a.createElement("div",{className:"retail-search__region_wrap",onMouseLeave:this.onMouseLeaveHandler},m.a.createElement("button",{type:"button",className:"retail-search__region__button btn",onClick:function(e){return a.toggleRegionsView(e)},"aria-label":this.state.selectedRegion.displayValue,"aria-haspopup":"listbox",tabIndex:0,ref:function(e){a.radiusDropdown=e}},m.a.createElement("p",{className:"retail-search__region__button_text",tabIndex:-1},m.a.createElement("span",{className:"retail-search__region__button_text_opt"},this.state.selectedRegion.displayValue),m.a.createElement("span",{className:l()({"icon-dropdown-down":!this.state.isRegionsOpen,"icon-dropdown-up":this.state.isRegionsOpen})}))),m.a.createElement("ul",{"aria-expanded":"true",role:"listbox",className:l()("retail-search__region_dropdown",{hide:!this.state.isRegionsOpen||this.state.focusOut})},r.map(function(e,t){return m.a.createElement(A.a,{index:t,prefix:"retail-search",key:t.toString(),total:r.length,defaultListElemClass:"retail-search__region_dropdown_element",listSelectedClass:"retail-search__region_dropdown_element-selected",isSelected:e.value===a.state.selectedRegion.value,selectOptionHandler:function(e){return a.selectRegionHandler(e,t)},optionListButtonClass:"retail-search__region_dropdown_element-btn",optionListLabelClass:"retail-search__region_dropdown_element-btn_label",optionListLabel:e.displayValue,closeDropDown:a.toggleRegionsView,isOpen:a.state.isRegionsOpen&&!a.state.focusOut})})))),m.a.createElement(v.a,{query:f.a.desktopAndBelow},m.a.createElement("div",{className:"retail-search__dropdown"},m.a.createElement("div",{className:"retail-search__dropdown_holder"},m.a.createElement("select",{onChange:this.onRegionSelected},this.props.regionsMap.map(function(e,t){return m.a.createElement("option",{key:t.toString(),selected:a.state.selectedRegion.value===e.value,value:t},e.displayValue)}))),m.a.createElement("span",{className:"icon-dropdown-down"}))))),m.a.createElement("div",{className:"retail-search__toggle_search"},m.a.createElement("div",{className:"retail-search__toggle_search-text"},m.a.createElement(v.a,{query:f.a.desktopAndAbove},m.a.createElement("span",{className:"retail-search__toggle_search-label"},this.props.availableStoresLabel)),m.a.createElement("span",{tabIndex:0,role:"checkbox",className:"retail-search__toggle-switch",onClick:this.showAvailableToggle,onKeyPress:this.showAvailableToggle,"aria-checked":this.state.showAvailable,"aria-label":"Show Available"},m.a.createElement("i",{className:l()({"toggle-switch_on":!this.state.showAvailable,"toggle-switch_off toggle-switch_off_right":this.state.showAvailable})}),m.a.createElement("i",{className:l()({"toggle-switch_on toggle-switch_on_right":this.state.showAvailable,"toggle-switch_off":!this.state.showAvailable})})),m.a.createElement(v.a,{query:f.a.desktopAndBelow},m.a.createElement("span",{className:"retail-search__toggle_search-label"}," ",this.props.availableStoresLabel))),m.a.createElement("div",null,m.a.createElement("button",{type:"button",className:"retail-search__btn btn-primary",onClick:this.getInventoryDetails},m.a.createElement("span",{className:"cta-content"},m.a.createElement("span",{className:"cta-text"},this.props.searchLabel)))))),this.props.noRetailStores&&!this.state.isEmptySearched&&m.a.createElement("div",{className:"retail-search__no-results"},this.props.noResultsLabel),this.state.isEmptySearched&&"address"!==this.state.type&&m.a.createElement("div",{className:"retail-search__no-results"},this.props.searchTermMandatoryLabel))}}]),M);function M(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,M);var m=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,e));m.onSelectionChanged=function(e,t){m.setState({type:e,placeHolder:t,value:"",isEmptySearched:!1}),m.retailSearchRef.value="",Object(k.removeClass)(m.retailSearchRef.nextSibling,"active")},m.onRegionSelected=function(e){m.selectRegionHandler(e,e.target.value)},m.onMouseLeaveHandler=function(e){"retail-search__region_wrap"!==e.relatedTarget.className&&"change-store__container_dropdown"!==e.relatedTarget.className&&"retail-search__region_dropdown"!==e.relatedTarget.className&&m.setState({focusOut:!0,isRegionsOpen:!1})},m.getInventoryDetails=function(e){e.preventDefault();var n=D({},m.props.getRetailInventoryRequest),t=m.state.selectedRegion,o=t.type,i=t.value;if(n.payload.hideZeroInventory=m.state.showAvailable,m.state.value||"address"===m.state.type){if("address"===m.state.type)Object(I.getAddress)(m.state.value).then(function(e){if(0<Object.keys(e).length){var t=m.props.allStores;if("distance"===o){var a=Object(j.searchStoresInRadius)(e.lat,e.lng,i,t,!0);0<a.length?(n.payload.storeNumbers=a,m.props.dispatch(Object(b.e)(n))):m.props.dispatch(Object(b.g)())}if("country"===o){var r=t.filter(function(e){return e.store.country.toLowerCase()===i.toLowerCase()});(r=Object(j.sortStoresBasedOnDistance)(e.lat,e.lng,r).map(function(e){return e.store.mipsstoreNumber})).length?(n.payload.storeNumbers=r,m.props.dispatch(Object(b.e)(n))):m.props.dispatch(Object(b.g)())}if("all"===o){var s=Object(j.sortStoresBasedOnDistance)(e.lat,e.lng,t).map(function(e){return e.store.mipsstoreNumber});s.length?(n.payload.storeNumbers=s,m.props.dispatch(Object(b.e)(n))):m.props.dispatch(Object(b.g)())}}},function(){m.props.dispatch(Object(b.g)())});else{var a=m.props.allStores,r=a.filter(function(e){return e.store.mipsstoreNumber.toLowerCase()===m.state.value.toLowerCase()});if(0<r.length){var s=r[0].store,l=s.geoCodeLattitude,c=s.geoCodeLongitude;if("all"===o){var u=Object(j.sortStoresBasedOnDistance)(l,c,a);u.length?(n.payload.storeNumbers=u.map(function(e){return e.store.mipsstoreNumber}),m.props.dispatch(Object(b.e)(n))):m.props.dispatch(Object(b.g)())}if("country"===o){var d=a.filter(function(e){return e.store.country.toLowerCase()===i.toLowerCase()});(d=Object(j.sortStoresBasedOnDistance)(l,c,d).map(function(e){return e.store.mipsstoreNumber})).length?(n.payload.storeNumbers=d.map(function(e){return e.store.mipsstoreNumber}),m.props.dispatch(Object(b.e)(n))):m.props.dispatch(Object(b.g)())}if("distance"===o){var p=Object(j.searchStoresInRadius)(l,c,i,a,!0);0<p.length?(n.payload.storeNumbers=p,m.props.dispatch(Object(b.e)(n))):m.props.dispatch(Object(b.g)())}}else m.props.dispatch(Object(b.g)())}m.setState({isEmptySearched:!1})}else m.setState({isEmptySearched:!0})},m.showAvailableToggle=function(){m.setState({showAvailable:!m.state.showAvailable})},m.updateAddressStore=function(e){m.setState({value:e.target.value})},m.getEnteredKey=function(e){var t=e.which?e.which:e.keyCode,a=!1;return"ENTER"===Object(q.a)(t)&&(a=!0),a},m.searchInputHandler=function(e){m.getEnteredKey(e)&&m.getInventoryDetails(e)},m.selectRegionHandler=function(e,t){e.preventDefault(),m.setState({selectedRegion:m.props.regionsMap[t]},function(){m.toggleRegionsView(e)})},m.toggleRegionsView=function(e){e.preventDefault(),m.setState({isRegionsOpen:!m.state.isRegionsOpen,focusOut:!1},function(){m.state.isRegionsOpen&&!m.state.focusOut||m.radiusDropdown.focus()})};var t=e.regionsMap.filter(function(e){return e.isSelected}),a=e.searchTypes.filter(function(e){return"address"===e.type});return m.state={showAvailable:!0,selectedRegion:t[0],type:a[0].type,placeHolder:a[0].placeHolder,isEmptySearched:!1,isRegionsOpen:!1,focusOut:!1},m}P.defaultProps={};P.propTypes={regionsMap:n.a.array.isRequired,getRetailInventoryRequest:n.a.object.isRequired,dispatch:n.a.func.isRequired,allStores:n.a.array.isRequired,searchTypes:n.a.array.isRequired,availableStoresLabel:n.a.string.isRequired,withinLabel:n.a.string.isRequired,searchLabel:n.a.string.isRequired,noResultsLabel:n.a.string.isRequired,searchTermMandatoryLabel:n.a.string.isRequired,noRetailStores:n.a.bool.isRequired};var B=Object(o.connect)(function(e){return{aem:e.aem,regionsMap:d.get(e,"aem.salesServiceCenter.retailStore.regionsMap"),getRetailInventoryRequest:d.get(e,"aem.salesServiceCenter.retailStore.getRetailInventoryRequest"),allStores:e.salesService.allStores,searchTypes:d.get(e,"aem.salesServiceCenter.retailStore.searchTypes"),availableStoresLabel:d.get(e,"aem.salesServiceCenter.retailStore.availableStoresLabel"),withinLabel:d.get(e,"aem.salesServiceCenter.retailStore.withinLabel"),searchLabel:d.get(e,"aem.salesServiceCenter.retailStore.searchLabel"),noResultsLabel:d.get(e,"aem.salesServiceCenter.retailStore.noResultsLabel",""),searchTermMandatoryLabel:d.get(e,"aem.salesServiceCenter.retailStore.searchTermMandatoryLabel",""),noRetailStores:d.get(e,"salesService.noRetailStores",!1)}})(P),F=function(e,t,a){return t&&W(e.prototype,t),a&&W(e,a),e};function W(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(V,m.a.Component),F(V,[{key:"render",value:function(){var a=this,e=this.props.columnHeadings,t=e.storeNumber,r=e.storeName,s=e.totalInTransit,n=e.onHand,o=e.reserved,i=e.available,l=e.assorted,c=this.props.retailStoreInventory.length?this.props.retailStoreInventory.reduce(function(e,t){return{available:e.available+t.available}}):0,u=this.props.labels.sortByLabel,d=void 0===u?"Sort By":u,p={storeNumber:t,storeName:r};return this.state.selectedSortBy&&this.props.retailStoreInventory.sort(function(e,t){return"storeNumber"===a.state.selectedSortBy?e[a.state.selectedSortBy]-t[a.state.selectedSortBy]:e[a.state.selectedSortBy]<t[a.state.selectedSortBy]?-1:e[a.state.selectedSortBy]>t[a.state.selectedSortBy]?1:0}),m.a.createElement("div",{className:"container-centered"},m.a.createElement(B,null),m.a.createElement(v.a,{query:f.a.desktopAndAbove},0<this.props.retailStoreInventory.length&&m.a.createElement(_.a,{data:this.props.retailStoreInventory,showPagination:!1,minRows:0,defaultPageSize:this.props.retailStoreInventory.length,resizable:!1,columns:[{Header:function(){return m.a.createElement("span",{className:"sort-header tf-g--no-wrap tf-g__between"},t," ",m.a.createElement("i",{className:"icon-dropdown-up"})," ",m.a.createElement("i",{className:"icon-dropdown-down"}))},accessor:function(e){return Number(e.storeNumber)},id:"storeNumber",sortable:!0,minWidth:165,Footer:this.props.availableFooterText},{Header:function(){return m.a.createElement("span",{className:"sort-header tf-g--no-wrap tf-g__between"},r," ",m.a.createElement("i",{className:"icon-dropdown-up"})," ",m.a.createElement("i",{className:"icon-dropdown-down"}))},accessor:"storeName",minWidth:465,sortable:!0},{Header:s,accessor:"totalInTransit",minWidth:165,sortable:!1},{Header:n,accessor:"onHand",minWidth:165,sortable:!1},{Header:o,accessor:"reserved",minWidth:165,sortable:!1},{Header:i,accessor:"available",minWidth:165,sortable:!1},{Header:l,accessor:"isAssorted",minWidth:165,sortable:!1,Cell:function(e){return m.a.createElement("span",null,e.value?"Y":"N")},Footer:m.a.createElement("span",null,c?c.available:0)}]})),m.a.createElement(v.a,{query:f.a.desktopAndBelow},0<this.props.retailStoreInventory.length&&m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"sales-service__sort-by"},m.a.createElement("label",{htmlFor:"salesServiceSortBy"},m.a.createElement("select",{onChange:this.onSortByChange,id:"salesServiceSortBy"},""===this.state.selectedSortBy&&m.a.createElement("option",{value:"",key:d},d),Object.keys(p).map(function(e){return m.a.createElement("option",{value:e,key:e},p[e])})),m.a.createElement("span",{className:"icon-dropdown-down"}))),this.props.retailStoreInventory.map(function(e){return m.a.createElement("div",{className:"sales-service__wrap"},m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},t),m.a.createElement("div",{className:"sales-service__row_value"},e.storeNumber)),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},r),m.a.createElement("div",{className:"sales-service__row_value"},e.storeName)),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},s),m.a.createElement("div",{className:"sales-service__row_value"},e.totalInTransit)),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},n),m.a.createElement("div",{className:"sales-service__row_value"},e.onHand)),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},o),m.a.createElement("div",{className:"sales-service__row_value"},e.reserved)),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},i),m.a.createElement("div",{className:"sales-service__row_value"},e.available)),m.a.createElement("div",{className:"sales-service__row"},m.a.createElement("div",{className:"sales-service__row_heading"},l),m.a.createElement("div",{className:"sales-service__row_value"},e.isAssorted?"Y":"N")))}),m.a.createElement("div",{className:"sales-service__row table-footer"},m.a.createElement("div",{className:"sales-service__row_heading"},this.props.availableFooterText),m.a.createElement("div",{className:"sales-service__row_value"},c?c.available:0)))))}}]),V);function V(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,V);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(V.__proto__||Object.getPrototypeOf(V)).call(this,e));return t.onSortByChange=function(e){t.setState({selectedSortBy:e.target.value})},t.state={selectedSortBy:""},t}U.propTypes={retailStoreInventory:n.a.array.isRequired,columnHeadings:n.a.object.isRequired,availableFooterText:n.a.string.isRequired,labels:n.a.object.isRequired};var K=Object(o.connect)(function(e){return{aem:e.aem,labels:e.authoredLabels,retailStoreInventory:d.get(e,"salesService.retailStoreInventory",[]),availableFooterText:d.get(e,"aem.salesServiceCenter.availableFooterLabel"),columnHeadings:e.salesService.columnHeadings}})(U),G=function(e,t,a){return t&&Y(e.prototype,t),a&&Y(e,a),e};function Y(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var J=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(z,m.a.Component),G(z,[{key:"componentDidMount",value:function(){this.state.salesSrvSite&&(this.props.dispatch(Object(b.b)(this.props.distributionInvRequest)),this.props.dispatch(Object(b.c)(this.props.onOrderStatusRequest)),this.props.dispatch(Object(b.a)(this.props.getAllStoresRequest)))}},{key:"render",value:function(){var a=this,e=this.props.ariaLabels;return this.state.salesSrvSite?m.a.createElement("div",{className:"sales-service"},m.a.createElement(v.a,{query:f.a.desktopAndAbove},m.a.createElement("div",null,m.a.createElement("ul",{className:"sales-service__options tf-g--no-wrap container--2",role:"tablist"},this.props.tabs.map(function(t){return m.a.createElement("li",{className:"sales-service__options_item col-4-12 display__inline-block",role:"presentation",onClick:function(e){return a.setCurrentTab(e,t)}},m.a.createElement("a",{href:t.href,className:l()("sales-service__options_item_link",{active:t.key===a.state.currentTab}),role:"tab","aria-selected":"true"},t.title))})),m.a.createElement("div",{role:"tabpanel"},m.a.createElement("div",{className:l()({hide:this.state.currentTab!==u.a.ORDER_STATUS})},m.a.createElement(T,null)),m.a.createElement("div",{className:l()({hide:this.state.currentTab!==u.a.RETAIL_STORE})},m.a.createElement(K,null)),m.a.createElement("div",{className:l()({hide:this.state.currentTab!==u.a.DISTRIBUTION_CENTER})},m.a.createElement(N,null))))),m.a.createElement(v.a,{query:f.a.desktopAndBelow},m.a.createElement("div",{className:"sales-service__cta"},this.props.tabs.map(function(t){return m.a.createElement("button",{type:"button",className:"cta",onClick:function(e){return a.setCurrentTab(e,t,!0)}},m.a.createElement("span",{className:"cta-content hover-cta",tabIndex:"-1"},m.a.createElement("span",{className:"cta-text"},t.title),m.a.createElement("i",{className:"icon-dropdown-right"})))}),m.a.createElement(h.a,{showModal:this.state.isOpen&&this.state.currentTab===u.a.ORDER_STATUS,showLeftArrow:!0,holder:"sales-service",closeAriaLabel:e.closeAriaLabel,leftArrowAriaLabel:e.leftArrowAriaLabel,focusElement:!1,resetInitiator:function(){a.toggleModal()},customClass:"sales-service__modal"},m.a.createElement(T,null)),m.a.createElement(h.a,{showModal:this.state.isOpen&&this.state.currentTab===u.a.RETAIL_STORE,showLeftArrow:!0,holder:"sales-service",closeAriaLabel:e.closeAriaLabel,leftArrowAriaLabel:e.leftArrowAriaLabel,focusElement:!1,resetInitiator:function(){a.toggleModal()},customClass:"sales-service__modal"},m.a.createElement(K,null)),m.a.createElement(h.a,{showModal:this.state.isOpen&&this.state.currentTab===u.a.DISTRIBUTION_CENTER,showLeftArrow:!0,holder:"sales-service",closeAriaLabel:e.closeAriaLabel,leftArrowAriaLabel:e.leftArrowAriaLabel,focusElement:!1,resetInitiator:function(){a.toggleModal()},customClass:"sales-service__modal"},m.a.createElement(N,null))))):null}}]),z);function z(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,z);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,e));r.setCurrentTab=function(e,t,a){e.preventDefault(),r.setState({currentTab:t.key,columnHeadings:t.columnHeadings,isOpen:a}),r.props.dispatch(Object(b.f)(t.columnHeadings))},r.toggleModal=function(){r.setState({currentTab:"",columnHeadings:""}),r.props.dispatch(Object(b.f)([]))};var t=e.tabs.filter(function(e){return e.key===u.a.RETAIL_STORE}),a=Object(p.a)();return r.state={currentTab:u.a.RETAIL_STORE,columnHeadings:0<t.length?t[0].columnHeadings:[],salesSrvSite:a},e.dispatch(Object(b.f)(r.state.columnHeadings)),r}J.defaultProps={},J.propTypes={dispatch:n.a.func.isRequired,tabs:n.a.array.isRequired,distributionInvRequest:n.a.object.isRequired,onOrderStatusRequest:n.a.object.isRequired,ariaLabels:n.a.object.isRequired,getAllStoresRequest:n.a.object.isRequired};t.default=Object(o.connect)(function(e){return{tabs:d.get(e,"aem.salesServiceCenter.tabs",[]),distributionInvRequest:d.get(e,"aem.salesServiceCenter.distributionInvRequest"),onOrderStatusRequest:d.get(e,"aem.salesServiceCenter.onOrderStatusRequest"),getAllStoresRequest:d.get(e,"aem.salesServiceCenter.retailStore.getAllStoresRequest"),ariaLabels:d.get(e,"aem.salesServiceCenter.ariaLabels",{})}})(J)},235:function(e,t,a){var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},l=a(1),c=a(260).calculateDistance;e.exports={searchStoresInRadius:function(s,n,e,t,a){var r,o=[],i=l.get(window,"tiffany.isDistanceInKm",!1)?e:1.60934*e;return(o=t.map(function(e){var t=Number(e.geoCodeLattitude||e.store.geoCodeLattitude),a=Number(e.geoCodeLongitude||e.store.geoCodeLongitude),r=c(s,n,t,a);return{distance:Math.ceil(.001*r),tempStore:e}}).filter(function(e){return e.distance<=i})).sort(function(e,t){return e.distance-t.distance}),r=o.map(function(e){return e.tempStore.store.storeId}),a?o.map(function(e){return e.tempStore.store.mipsstoreNumber}):r},sortStoresBasedOnDistance:function(n,o,e){var t=[];return(t=e.map(function(e){var t=Number(e.geoCodeLattitude||e.store.geoCodeLattitude),a=Number(e.geoCodeLongitude||e.store.geoCodeLongitude),r=c(n,o,t,a),s=Math.ceil(.001*r);return i({distance:s},e)})).sort(function(e,t){return e.distance-t.distance}),t}}},260:function(e,t,a){var v=a(1),f=a(9);function d(e){return e*(Math.PI/180)}e.exports={getAddress:function(u,d){function t(){var e=new window.google.maps.Geocoder,t={};d&&(a=(a=d.split("_"))[1]||""),t=a?{address:u,componentRestrictions:{country:a}}:{address:u},e.geocode(t,function(e,t){var a=v.get(window,"tiffany.authoredContent.namedCountries",{}),r=v.get(window,"tiffany.authoredContent.countryEUArray",{}),s="",n=[];r&&r.values&&(n=r.values),d&&(s=d.split("_")[0]||""),a[d]&&0<e.length&&e[0].formatted_address&&(e[0].formatted_address===a[d]&&(m=!0));if(0<=n.indexOf(d)&&!m&&a[s])for(var o=0;o<a[s].length;o+=1)0<e.length&&e[0].formatted_address===a[d.split("_")[0]][o]&&(m=!0);if("OK"===t){if(0<e.length){var i=e[0];if(!m){var l=v.get(i,"geometry.location"),c={lat:l.lat(),lng:l.lng()};p.resolve(c)}p.resolve({})}}else p.reject("Couldnt't find the location of "+u)})}var p=f.Deferred(),m=!1,a="";return d&&(a=(a=d.split("_"))[1]||""),window.BMap?(new window.BMap.Geocoder).getPoint(u,function(e){e?p.resolve(e):window.google?t():p.reject("Couldnt't find the location of "+u)},function(){t()}):window.google&&t(),p.promise()},getZipCodeOrCityFromPosition:function(i,l){function a(){var n=window.google.maps.GeocoderStatus.OK,o=new window.google.maps.Geocoder;o.geocode({location:i},function(e,t){if(t===n){for(var a=0;a<e.length;a+=1){var r=v.get(e[a],"types"),s=v.get(e[a],"address_components");-1<f.inArray("postal_code",r)&&1<=s.length&&(u=v.get(s[0],"long_name")),-1<f.inArray("locality",e[a].types)&&1<=s.length&&(d=v.get(s[0],"long_name"))}l&&c.resolve(d),u?(p=u||d,c.resolve(p)):o.geocode({location:e[0].geometry.location},function(e,t){if(t===n){for(var a=0;a<e.length;a+=1){var r=v.get(e[a],"types"),s=v.get(e[a],"address_components");-1<f.inArray("postal_code",r)&&1<=s.length&&(u=v.get(s[0],"long_name"))}u?(p=u||d,c.resolve(u)):c.reject("No Postal Code Found for this location")}})}else c.reject("Couldnt't find the location "+i)})}var c=f.Deferred(),u="",d="",p="";if(window.BMap){var e=new window.BMap.Geocoder,t=new window.BMap.Point(i.lng,i.lat);e.getLocation(t,function(e){if(e){var t=v.get(e,"addressComponents.city","");c.resolve(t)}else window.google.maps?a():c.reject()})}else window.google.maps&&a();return c.promise()},calculateDistance:function(e,t,a,r){if(window.google){var s=window.google,n=new s.maps.LatLng(e,t),o=new s.maps.LatLng(a,r);return s.maps.geometry.spherical.computeDistanceBetween(n,o)}var i=d(e),l=d(t),c=d(a),u=d(r);return 2*Math.asin(Math.sqrt(Math.pow(Math.sin((i-c)/2),2)+Math.cos(i)*Math.cos(c)*Math.pow(Math.sin((l-u)/2),2)))*6378137},getUserCountry:function(){return new Promise(function(s,n){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){function a(){var e=new window.google.maps.LatLng(t.coords.latitude,t.coords.longitude);(new window.google.maps.Geocoder).geocode({latLng:e},function(e,t){var a=e[e.length-1].formatted_address;s(a)})}if(window.BMap){var e=new window.BMap.Geocoder,r=new window.BMap.Point(t.coords.longitude,t.coords.latitude);e.getLocation(r,function(e){if(e){var t=v.get(e,"address","").split(",").pop().trim();if(t)return void s(t);n()}window.google?a():n()})}else window.google&&a()},function(e){n(e)})})}}},29:function(e,t,a){"use strict";t.a=function(e,t){switch(e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return"DIGIT";case 9:return t?"BACKTAB":"TAB";case 13:return"ENTER";case 27:return"ESCAPE";case 32:return"SPACE";case 37:return"LEFTARROW";case 38:return"UPARROW";case 39:return"RIGHTARROW";case 40:return"DOWNARROW"}}},404:function(e,t,a){"use strict";var r=a(0),m=a.n(r),s=a(2),n=a.n(s),o=a(5),v=a.n(o),i=a(1),f=a.n(i),l=a(29),c=a(3),u=function(e,t,a){return t&&d(e.prototype,t),a&&d(e,a),e};function d(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,m.a.Component),u(h,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.isOpen&&e.isSelected&&this["item_"+e.index]&&setTimeout(function(){t["item_"+e.index].focus()})}},{key:"render",value:function(){var t=this,e={},a=f.a.get(window,"tiffany.labels.selectedLabel","Selected"),r=this.props,s=r.listSelectedClass,n=r.isSelected,o=r.defaultListElemClass,i=r.index,l=r.optionListLabel,c=r.optionListLabelClass,u=r.optionListButtonClass,d=r.selectOptionHandler,p=r.prefix;return e[s]=n,m.a.createElement("li",{className:s?v()(""+o,e,""+p+i):""+p+i,tabIndex:0,"aria-label":n?a+", "+l:"","aria-selected":n,onClick:function(e){return d(e)},onKeyDown:this.handleKeyDown(i),ref:function(e){t["item_"+i]=e},role:"option"},m.a.createElement("span",{className:""+u},m.a.createElement("span",{className:c},l)))}}]),h);function h(){var e,t,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=i=p(this,(e=h.__proto__||Object.getPrototypeOf(h)).call.apply(e,[this].concat(r)))).handleKeyDown=function(o){return function(e){var t=Object(l.a)(e.keyCode,e.shiftKey),a=i.props,r=a.total,s=a.prefix,n=void 0;switch(t){case"TAB":case"DOWNARROW":e.preventDefault(),n=o===r-1?0:o+1,i.handleFocus("."+s+n);break;case"UPARROW":case"BACKTAB":e.preventDefault(),n=0===o?r-1:o-1,i.handleFocus("."+s+n);break;case"ESCAPE":e.preventDefault(),i.props.closeDropDown(e);break;case"ENTER":i.props.selectOptionHandler(e)}}},i.handleFocus=function(t){setTimeout(function(){var e=Object(c.findFirst)(t);e&&e.focus()})},p(i,t)}b.propTypes={listSelectedClass:n.a.string,defaultListElemClass:n.a.string,index:n.a.number,selectOptionHandler:n.a.func.isRequired,closeDropDown:n.a.func,isSelected:n.a.bool.isRequired,optionListButtonClass:n.a.string,optionListLabelClass:n.a.string,optionListLabel:n.a.any.isRequired,total:n.a.number.isRequired,prefix:n.a.string.isRequired,isOpen:n.a.bool},b.defaultProps={listSelectedClass:"",defaultListElemClass:"",index:0,optionListButtonClass:"",optionListLabelClass:"",isOpen:!1,closeDropDown:function(){}},t.a=b},86:function(e,t,a){"use strict";a.d(t,"d",function(){return o}),a.d(t,"b",function(){return v}),a.d(t,"c",function(){return f}),a.d(t,"f",function(){return b}),a.d(t,"a",function(){return h}),a.d(t,"g",function(){return _}),a.d(t,"e",function(){return g});var i=a(16),l=a(38),r=a(242),c=a.n(r),s=a(516),u=a.n(s),n=a(222),d=a.n(n),p=a(1),m=a(235),o=function(e){return function(t){i.a.makeAjaxRequest(e,function(e){t({type:l.a.SALES_SERVICE_SUCCESS,payload:{response:e.resultDto}})},function(e){})}},v=function(e){return function(t){i.a.makeAjaxRequest(e,function(e){t({type:l.a.DISTRIBUTION_INVENTORY_SUCCESS,payload:{response:e.resultDto}})})}},f=function(e){return function(n,o){i.a.makeAjaxRequest(e,function(e){var a=o().aem.salesServiceCenter.storeNameMap;if(e&&e.resultDto){var t=c()(e.resultDto,function(e){return e.poLocation}),r=u()(t,function(e,t){return{poLocation:t,data:e,poName:a[t]}}),s=d()(r);n({type:l.a.ON_ORDER_STATUS_SUCCESS,payload:{response:s}})}})}},b=function(t){return function(e){e({type:l.a.COLUMN_HEADINGS,payload:t})}},h=function(e){return function(n,o){i.a.makeAjaxRequest(e,function(e){if(e&&e.resultDto){var t=o(),a=p.get(t,"aem.salesServiceCenter.retailStore.getRetailInventoryRequest"),r=void 0,s=e.resultDto.map(function(e){return e.store.mipsstoreNumber&&e.store.mipsstoreNumber.trim()?e:null}).filter(function(e){return e});navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){var t=Object(m.sortStoresBasedOnDistance)(e.coords.latitude,e.coords.longitude,s);r=t.map(function(e){return e.store.mipsstoreNumber})},function(){r=s.map(function(e){return e.store.mipsstoreNumber})}):r=s.map(function(e){return e.store.mipsstoreNumber}),n({type:l.a.ALL_STORES,payload:{response:s}}),r=r||s.map(function(e){return e.store.mipsstoreNumber}),a.payload.storeNumbers=r,i.a.makeAjaxRequest(a,function(e){var t=e.resultDto.map(function(t){var e=s.filter(function(e){return e.store.mipsstoreNumber===t.storeNumber});return e.length&&(t.storeName=e[0].store.storeName,t.storeOrder=r.indexOf(t.storeNumber)),t});t=t.sort(function(e,t){return e.storeOrder-t.storeOrder}),n({type:l.a.STORES_RETAIL_INVENTORY,payload:{response:t}})},function(e){console.log(e),n({type:l.a.STORES_RETAIL_INVENTORY_FAILED,payload:{response:[]}})})}})}},_=function(){return function(e){e({type:l.a.STORES_RETAIL_INVENTORY_FAILED,payload:{response:[]}})}},g=function(n){return function(r,s){i.a.makeAjaxRequest(n,function(e){r({type:l.a.RESET_RETAIL_STORE_RESULTS});var a=s().salesService.allStores,t=e.resultDto.map(function(t){var e=a.filter(function(e){return e.store.mipsstoreNumber.toString()===t.storeNumber});return e.length&&(t.storeName=e[0].store.storeName,t.storeOrder=n.payload.storeNumbers.indexOf(t.storeNumber)),t});t=t.sort(function(e,t){return e.storeOrder-t.storeOrder}),r({type:l.a.STORES_RETAIL_INVENTORY,payload:{response:t}})},function(){r(_())})}}}}]);